<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0051)http://www.dei.isep.ipp.pt/~orlando/so2/threads.htm -->
<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

<meta name="ProgId" content="Word.Document">
<meta name="Generator" content="Microsoft Word 10">
<meta name="Originator" content="Microsoft Word 10">
<link rel="File-List" href="http://www.dei.isep.ipp.pt/~orlando/so2/threads_files/filelist.xml">
<link rel="Edit-Time-Data" href="http://www.dei.isep.ipp.pt/~orlando/so2/threads_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>Threads</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Orlando Jorge Coelho de Moura Sousa</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>abcde</o:LastAuthor>
  <o:Revision>63</o:Revision>
  <o:TotalTime>255</o:TotalTime>
  <o:Created>2000-01-05T16:51:00Z</o:Created>
  <o:LastSaved>2005-11-10T17:23:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>3836</o:Words>
  <o:Characters>20719</o:Characters>
  <o:Company> </o:Company>
  <o:Lines>172</o:Lines>
  <o:Paragraphs>49</o:Paragraphs>
  <o:CharactersWithSpaces>24506</o:CharactersWithSpaces>
  <o:Version>10.2625</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:HyphenationZone>21</w:HyphenationZone>
  <w:Compatibility>
   <w:ApplyBreakingRules/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:\5B8B\4F53;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:"\@SimSun";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h3
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:13.5pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:SimSun;
	font-weight:bold;}
p
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:70.85pt 3.0cm 70.85pt 3.0cm;
	mso-header-margin:36.0pt;
	mso-footer-margin:36.0pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:31926387;
	mso-list-template-ids:8661054;}
@list l0:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1
	{mso-list-id:32196317;
	mso-list-template-ids:-1783861378;}
@list l1:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l2
	{mso-list-id:65761566;
	mso-list-template-ids:-1387634690;}
@list l2:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l3
	{mso-list-id:132144145;
	mso-list-template-ids:1841435952;}
@list l3:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l4
	{mso-list-id:161505264;
	mso-list-template-ids:-1585131824;}
@list l4:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l4:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l4:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l4:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l4:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l4:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l4:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l4:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l4:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l5
	{mso-list-id:182281940;
	mso-list-template-ids:915600496;}
@list l5:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l5:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l5:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l5:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l5:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l5:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l5:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l5:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l5:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l6
	{mso-list-id:190145274;
	mso-list-template-ids:-1133223652;}
@list l6:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l7
	{mso-list-id:205065725;
	mso-list-template-ids:-1071862384;}
@list l7:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l7:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l7:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l7:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l7:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l7:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l7:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l7:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l7:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l8
	{mso-list-id:215430457;
	mso-list-template-ids:204235338;}
@list l8:level1
	{mso-level-start-at:0;
	mso-level-number-format:none;
	mso-level-text:-;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l8:level2
	{mso-level-number-format:none;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:36.0pt;
	text-indent:-18.0pt;
	font-family:"Courier New";
	mso-bidi-font-family:"Times New Roman";}
@list l8:level3
	{mso-level-number-format:none;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:54.0pt;
	text-indent:-18.0pt;
	font-family:Wingdings;}
@list l8:level4
	{mso-level-number-format:none;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:72.0pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l8:level5
	{mso-level-number-format:none;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:90.0pt;
	text-indent:-18.0pt;
	font-family:"Courier New";
	mso-bidi-font-family:"Times New Roman";}
@list l8:level6
	{mso-level-number-format:none;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:108.0pt;
	text-indent:-18.0pt;
	font-family:Wingdings;}
@list l8:level7
	{mso-level-number-format:none;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:126.0pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l8:level8
	{mso-level-number-format:none;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:144.0pt;
	text-indent:-18.0pt;
	font-family:"Courier New";
	mso-bidi-font-family:"Times New Roman";}
@list l8:level9
	{mso-level-number-format:none;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:162.0pt;
	text-indent:-18.0pt;
	font-family:Wingdings;}
@list l9
	{mso-list-id:217592322;
	mso-list-type:hybrid;
	mso-list-template-ids:1741060514 -1136854178 -204165848 2086577600 787881968 -2031073378 261500752 -1952531148 775993750 867342702;}
@list l9:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l9:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l9:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l9:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l9:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l9:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l9:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l9:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l9:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l10
	{mso-list-id:336731168;
	mso-list-template-ids:1709995716;}
@list l10:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l10:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l10:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l10:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l10:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l10:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l10:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l10:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l10:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l11
	{mso-list-id:337856544;
	mso-list-template-ids:1307901728;}
@list l11:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l11:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l11:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l11:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l11:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l11:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l11:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l11:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l11:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l12
	{mso-list-id:340426305;
	mso-list-template-ids:-940821212;}
@list l12:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l12:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l12:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l12:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l12:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l12:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l12:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l12:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l12:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l13
	{mso-list-id:410857520;
	mso-list-template-ids:-727434354;}
@list l13:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l13:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l13:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l13:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l13:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l13:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l13:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l13:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l13:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l14
	{mso-list-id:433138488;
	mso-list-template-ids:-1871283276;}
@list l14:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l15
	{mso-list-id:674502920;
	mso-list-template-ids:-446386500;}
@list l15:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l16
	{mso-list-id:679234082;
	mso-list-template-ids:-1360733454;}
@list l16:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l17
	{mso-list-id:731348113;
	mso-list-type:hybrid;
	mso-list-template-ids:-2041810464 -608956700 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l17:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
@list l17:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l18
	{mso-list-id:788552613;
	mso-list-template-ids:564065768;}
@list l18:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l18:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l18:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l18:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l18:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l18:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l18:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l18:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l18:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l19
	{mso-list-id:842936044;
	mso-list-template-ids:-2072712144;}
@list l19:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l19:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l19:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l19:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l19:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l19:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l19:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l19:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l19:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l20
	{mso-list-id:893925157;
	mso-list-template-ids:-1462472964;}
@list l20:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l21
	{mso-list-id:1049035497;
	mso-list-template-ids:-1281859036;}
@list l21:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l22
	{mso-list-id:1106733552;
	mso-list-template-ids:-506579880;}
@list l22:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l22:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l22:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l22:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l22:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l22:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l22:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l22:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l22:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l23
	{mso-list-id:1142380231;
	mso-list-template-ids:-1586047532;}
@list l23:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l23:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l23:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l23:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l23:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l23:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l23:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l23:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l23:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l24
	{mso-list-id:1142381903;
	mso-list-template-ids:-1008284484;}
@list l24:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l24:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l24:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l24:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l24:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l24:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l24:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l24:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l24:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l25
	{mso-list-id:1191650777;
	mso-list-template-ids:1011513206;}
@list l25:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l26
	{mso-list-id:1218936077;
	mso-list-template-ids:2096139352;}
@list l26:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l26:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l26:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l26:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l26:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l26:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l26:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l26:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l26:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l27
	{mso-list-id:1268922487;
	mso-list-template-ids:-1235208162;}
@list l27:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l28
	{mso-list-id:1340236028;
	mso-list-template-ids:-748643074;}
@list l28:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l28:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l28:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l28:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l28:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l28:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l28:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l28:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l28:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l29
	{mso-list-id:1344019243;
	mso-list-template-ids:332722522;}
@list l29:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l30
	{mso-list-id:1395083827;
	mso-list-type:hybrid;
	mso-list-template-ids:-1171381618 675712502 -1092061132 -874842402 1028688364 -1263518088 -348855486 -512437654 -1022216638 -459793878;}
@list l30:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l30:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l30:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l30:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l30:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l30:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l30:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l30:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l30:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l31
	{mso-list-id:1605843708;
	mso-list-type:hybrid;
	mso-list-template-ids:-631704878 -1215404788 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l31:level1
	{mso-level-start-at:3;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:54.0pt;
	mso-level-number-position:left;
	margin-left:54.0pt;
	text-indent:-18.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
@list l32
	{mso-list-id:1780248498;
	mso-list-template-ids:-2040734970;}
@list l32:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l33
	{mso-list-id:1790852252;
	mso-list-template-ids:-347850950;}
@list l33:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l34
	{mso-list-id:1821848303;
	mso-list-template-ids:-2146404336;}
@list l34:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l35
	{mso-list-id:1948347251;
	mso-list-template-ids:-1296902610;}
@list l35:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l35:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l35:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l35:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l35:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l35:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l35:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l35:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l35:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l36
	{mso-list-id:2108188311;
	mso-list-template-ids:-507111948;}
@list l36:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l8:level1 lfo52
	{mso-level-numbering:continue;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l8:level2 lfo52
	{mso-level-numbering:continue;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:36.0pt;
	text-indent:-18.0pt;
	font-family:"Courier New";
	mso-bidi-font-family:"Times New Roman";}
@list l8:level3 lfo52
	{mso-level-numbering:continue;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:54.0pt;
	text-indent:-18.0pt;
	font-family:Wingdings;}
@list l8:level4 lfo52
	{mso-level-numbering:continue;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:72.0pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l8:level5 lfo52
	{mso-level-numbering:continue;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:90.0pt;
	text-indent:-18.0pt;
	font-family:"Courier New";
	mso-bidi-font-family:"Times New Roman";}
@list l8:level6 lfo52
	{mso-level-numbering:continue;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:108.0pt;
	text-indent:-18.0pt;
	font-family:Wingdings;}
@list l8:level7 lfo52
	{mso-level-numbering:continue;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:126.0pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l8:level8 lfo52
	{mso-level-numbering:continue;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:144.0pt;
	text-indent:-18.0pt;
	font-family:"Courier New";
	mso-bidi-font-family:"Times New Roman";}
@list l8:level9 lfo52
	{mso-level-numbering:continue;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:6.0pt;
	margin-left:162.0pt;
	text-indent:-18.0pt;
	font-family:Wingdings;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang="PT" style="tab-interval:35.4pt">

<div class="Section1">

<p><b><span style="font-size:13.5pt;font-family:Arial">Threads<o:p></o:p></span></b></p>

<p><span style="font-size:10.0pt">Um thread é uma sequência de instruções que
vão ser executadas num programa. No ambiente UNIX, os threads encontram-se
dentro de um processo, utilizando os recursos desse processo. Um processo pode
ter vários threads. <o:p></o:p></span></p>

<p><span style="font-size:10.0pt">Pode-se dizer que um thread é um procedimento
que é executado dentro de um processo de uma forma independente. Para melhor
perceber a estrutura de um thread é útil entender o relacionamento entre um
processo e um thread. Um processo é criado pelo sistema operativo e podem
conter informações relacionadas com os recursos do programa e o estado de
execução do programa: <o:p></o:p></span></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo3;tab-stops:list 36.0pt"><span lang="EN-GB" style="font-size:10.0pt;mso-ansi-language:EN-GB">Process ID, process group
     ID, group ID <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo3;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Ambiente <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo3;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Directoria de trabalho <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo3;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Instruções do programa <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo3;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Registos <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo3;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Pilha (Stack) <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo3;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Espaço de endereçamento comum, dados e memória <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo3;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Descritores de ficheiros <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo3;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Comunicação entre processos (pipes, semáforos, memória partilhada,
     filas de mensagens) <o:p></o:p></span></li>
</ol>

<p><span style="font-size:10.0pt">Os threads utilizam os recursos de um
processo, sendo também capazes de ser escalonados pelo sistema operativo e
serem executados como entidades independentes dentro de um processo.<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">Um thread pode conter um controlo de fluxo
independente e ser escalonável, porque mantêm o seu próprio: <o:p></o:p></span></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l26 level1 lfo6;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Pilha <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l26 level1 lfo6;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Propriedades de escalonamento <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l26 level1 lfo6;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Dados específicos do thread <o:p></o:p></span></li>
</ol>

<p><span style="font-size:10.0pt">Um processo pode ter vários threads,
partilhando cada um os recursos do processo e são executados no mesmo espaço de
endereçamento. Com vários threads, temos em qualquer instante vários pontos de
execução.<o:p></o:p></span></p>

<p><span style="font-size:10.0pt"><img width="517" height="390" id="_x0000_i1025" src="./Threads_files/Image12.gif"><o:p></o:p></span></p>

<p><span style="font-size:10.0pt">Como os threads partilham os recursos de um
processo:</span> <span style="font-size:10.0pt"><o:p></o:p></span></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l22 level1 lfo9;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">as alterações feitas por um thread num recurso partilhado (ex:
     fechar um ficheiro) serão "vistaa" pelos outros threads. <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l22 level1 lfo9;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Dois apontadores com o mesmo valor, apontam para os mesmos dados. <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l22 level1 lfo9;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">É possível ler e escrever nas mesmas posições de memória, sendo
     por isso necessária uma sincronização explícita que tem de ser feita pelo
     programador. <o:p></o:p></span></li>
</ol>

<p><span style="font-size:10.0pt">Todos os threads estão no mesmo nível
hierárquico. Um thread não mantém uma lista dos threads criados nem tem
conhecimento do thread que o criou.<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">Vantagens:</span> <span style="font-size:
10.0pt"><o:p></o:p></span></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l19 level1 lfo12;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">ganhos nas performances dos programas; <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l19 level1 lfo12;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">quando comparados com a criação e gestão de um processo, os
     threads podem ser criados com muito menos sobrecarga para o sistema
     operativo. A gestão dos threads necessita de menos recursos que a gestão
     dos processos; <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l19 level1 lfo12;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">todos os threads num processo partilham o mesmo espaço de
     endereçamento. A comunicação entre threads é mais eficiente e na maior
     parte das situações mais fácil do que a comunicação entre processos; <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l19 level1 lfo12;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">As aplicações com threads são mais eficientes e têm mais vantagens
     práticas: <o:p></o:p></span></li>
</ol>

<p><span style="font-size:10.0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
- Sobrecarregar o CPU com operações de entrada/saída de dados. Por exemplo, um
programa tem situações onde necessita de efectuar operações de entrada/saída de
dados muito demoradas. Enquanto um thread espera que a operação de
entrada/saída de dados termine, o CPU pode ser utilizado para efectuar outras
operações através de vários threads;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
- Tratamento de eventos assíncronos. Por exemplo, um servidor web pode
transmitir dados de pedidos anteriores e ao mesmo tempo fazer a gestão dos
novos pedidos.<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><b>Gestão de Threads<o:p></o:p></b></p>

<p><span style="font-size:10.0pt">Inicialmente, o processo apenas tem um thread
(main()). Todos os outros threads são criados explicitamente pelo programador.<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><span class="SpellE"><b><span lang="EN-GB" style="font-size:10.0pt;mso-ansi-language:
EN-GB">Criação</span></b></span><b><span lang="EN-GB" style="font-size:10.0pt;
mso-ansi-language:EN-GB"> de threads<o:p></o:p></span></b></p>

<p><span class="SpellE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_<span class="GramE">create</span></span></b></span><span class="GramE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">(</span></b></span><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">thread,
<span class="SpellE">attr</span>, <span class="SpellE">função</span>, <span class="SpellE">argumento</span>)</span></b><span lang="EN-GB" style="mso-ansi-language:
EN-GB"> </span><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><o:p></o:p></span></b></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l10 level1 lfo15;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Esta função cria um novo thread e torna-o executável. Os threads
     podem criar outros threads. <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l10 level1 lfo15;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">A função retorna a identificação do thread através do parâmetro <i>thread</i>.
     Esta identificação pode ser utilizada para efectuar várias operações nesse
     thread. <i><o:p></o:p></i></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l10 level1 lfo15;tab-stops:list 36.0pt"><i><span style="font-size:10.0pt">attr</span></i><span style="font-size:10.0pt"> é
     usado para definir as propriedades do thread. Podem-se especificar os
     atributos ou o NULL para os valores por defeito. <i><o:p></o:p></i></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l10 level1 lfo15;tab-stops:list 36.0pt"><i><span style="font-size:10.0pt">função</span></i><span style="font-size:10.0pt">
     é o nome da função que vai ser executada pelo thread. <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l10 level1 lfo15;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Pode-se <i>passar</i> um argumento para a <i>função</i> através de
     <i>argumento</i>. Deve-se fazer sempre o cast para o apontador de um void.
     Para passar mais do que um argumento, pode-se utilizar uma estrutura que
     contenha todos os argumentos e depois <i>passar</i> um apontador para essa
     estrutura. <o:p></o:p></span></li>
</ol>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><b><span style="font-size:10.0pt">Terminar a execução de um thread<o:p></o:p></span></b></p>

<p><span style="font-size:10.0pt">Existem várias maneiras de um thread
terminar:</span> <span style="font-size:10.0pt"><o:p></o:p></span></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l11 level1 lfo18;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">O thread retorna da sua função inicial (a função main para o
     thread inicial). <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l11 level1 lfo18;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">O thread executa a função </span><span style="font-size:10.0pt;
     font-family:&quot;Courier New&quot;">pthread_exit </span><span style="font-size:
     10.0pt"><o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l11 level1 lfo18;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">O thread foi cancelado por outro thread através da função
     pthread_cancel <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l11 level1 lfo18;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">O thread recebeu um sinal que fez com que terminasse; <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l11 level1 lfo18;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Todo o processo foi terminado devido à utilização da função exec
     (que substitui a imagem do processo) ou através da função exit (que
     termina um processo!) <o:p></o:p></span></li>
</ol>

<p><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">pthread_exit(estado)</span></b>
<b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><o:p></o:p></span></b></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l12 level1 lfo21;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Esta função termina explicitamente um thread, Utiliza-se esta
     função depois de um thread já ter completado o seu trabalho. <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l12 level1 lfo21;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Se o main() termina antes dos threads que foram criados, e termina
     através da utilização de </span><span style="font-size:10.0pt;font-family:
     &quot;Courier New&quot;">pthread_exit()</span><span style="font-size:10.0pt">, os
     outros threads continuarão a ser executados, caso contrário terminam
     automaticamente quando main() termina. <o:p></o:p></span></li>
</ol>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><b><span style="font-size:10.0pt">Exemplo 1:</span></b><span style="font-size:10.0pt"> Este exemplo cria três threads, cada um imprimindo a
mensagem "Sistemas Operativos II " e o número do thread, terminando
de seguida com a função pthread_exit()<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">/* Para compilar fazer: gcc -o fich fich.c
-lpthread */<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">#include &lt;<span class="SpellE">pthread.h</span>&gt;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">#include &lt;<span class="SpellE">stdio.h</span>&gt;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;<o:p></o:p></span></p>

<p><span lang="ES-TRAD" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:ES-TRAD">void *escreve(void *numero)<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">{ <o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;
int *n =(int *) numero;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;
printf("Sistemas Operativos II thread n. = %d\n",*n);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">pthread_<span class="GramE">exit</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">NULL);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">}<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;<o:p></o:p></span></p>

<p><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">void</span></span><span lang="EN-GB" style="font-size:
10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB"> main()<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">{<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span class="SpellE"><span class="GramE">pthread_t</span></span> threads[3];<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span class="SpellE"><span class="GramE">int</span></span> <span class="SpellE">s,i</span>;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span class="GramE">for</span> (<span class="SpellE">i</span>=0; <span class="SpellE">i</span>&lt;3; <span class="SpellE">i</span>++)<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="SpellE"><span class="GramE">printf</span></span><span class="GramE">(</span>"A
<span class="SpellE">criar</span> o thread n. %d\<span class="SpellE">n",i</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s=<span class="SpellE">pthread_<span class="GramE">create</span></span><span class="GramE">(</span>&amp;threads[<span class="SpellE">i</span>], NULL, <span class="SpellE">escreve</span>, (void *) &amp;<span class="SpellE">i</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">if (s)<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
perror("Erro ao criar o thread");<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
exit(-1);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;
}<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;
pthread_exit(NULL); /* se a função main não terminar com a função phtread_exit
o ultimo <o:p></o:p></span></p>

<p style="margin-left:216.0pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">thread
não chega a terminar a sua execução */<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">}<o:p></o:p></span></p>

<p><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">Nota: Neste
exemplo pode acontecer que apareça o mesmo número repetido (ex: 233). Isto
deve-se ao facto de quando o thread mostra o valor da variável i, este já foi
alterado. Para evitar esta situação deve-se utilizar um array de inteiros,
sendo cada posição utilizada apenas por um thread.<o:p></o:p></span></b></p>

<p><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;<o:p></o:p></span></b></p>

<p><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">Funções para
identificação de threads<o:p></o:p></span></b></p>

<p><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">pthread_self()</span></b>
<b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><o:p></o:p></span></b></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo24;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">retorna o identificador desse thread. <o:p></o:p></span></li>
</ol>

<p><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">pthread_equal()</span></b>
<b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><o:p></o:p></span></b></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo27;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">compara dois identificadores de threads. Se são diferentes retorna
     0, senão retorna um valor diferente de 0. <o:p></o:p></span></li>
</ol>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><span class="SpellE"><b><span lang="EN-GB" style="mso-ansi-language:EN-GB">Sincronização</span></b></span><b><span lang="EN-GB" style="mso-ansi-language:EN-GB"> de threads</span></b><span lang="EN-GB" style="mso-ansi-language:EN-GB"><o:p></o:p></span></p>

<p><span class="SpellE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_<span class="GramE">join</span></span></b></span><span class="GramE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">(</span></b></span><span class="SpellE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">thread_id</span></b></span><b><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">, <span class="SpellE">estado</span>)</span></b><span lang="EN-GB" style="mso-ansi-language:EN-GB"> </span><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB"><o:p></o:p></span></b></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l5 level1 lfo30;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">bloqueia o thread que <i>chamou </i>esta função até que o thread
     com o identificador <i>thread_id</i> termine. <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l5 level1 lfo30;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">também é possível obter o estado do thread que terminou, se esse
     terminou com a função pthread_exit(estado). <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l5 level1 lfo30;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Tem um conportamento semelante à função <i>wait </i>utilizadanos
     processos. <o:p></o:p></span></li>
</ol>

<p><span style="font-size:10.0pt">Quando se cria um thread, um dos atributos
que pode ser alterado é se outros threads podem ou não <i>chamar</i> a função
pthread_join sobre ele. Para isso são possíveis dois valores:</span> <span style="font-size:10.0pt"><o:p></o:p></span></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l7 level1 lfo33;tab-stops:list 36.0pt"><span lang="EN-GB" style="font-size:10.0pt;mso-ansi-language:EN-GB">Detached  <span class="SpellE">não</span> <span class="SpellE">pode</span> ser <span class="SpellE">feito</span> o join (PTHREAD_CREATE_DETACHED); <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l7 level1 lfo33;tab-stops:list 36.0pt"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;mso-ansi-language:EN-GB">Undetached</span></span><span lang="EN-GB" style="font-size:10.0pt;mso-ansi-language:EN-GB">  <span class="SpellE">pode</span> ser <span class="SpellE">feito</span> o join
     (PTHREAD_CREATE_JOINABLE) <o:p></o:p></span></li>
</ol>

<p><span lang="EN-GB" style="font-size:10.0pt;mso-ansi-language:EN-GB">&nbsp;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">Funções para manipulação de atributos <o:p></o:p></span></p>

<p><b><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">pthread_attr_init(attr)<o:p></o:p></span></b></p>

<p><span class="SpellE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_attr_<span class="GramE">setdetachstate</span></span></b></span><span class="GramE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">(</span></b></span><span class="SpellE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">attr</span></b></span><b><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">, <span class="SpellE">detachstate</span>)<o:p></o:p></span></b></p>

<p><span class="SpellE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_attr_<span class="GramE">destroy</span></span></b></span><span class="GramE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">(</span></b></span><span class="SpellE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">attr</span></b></span><b><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">)<o:p></o:p></span></b></p>

<p><span class="SpellE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_<span class="GramE">detach</span></span></b></span><span class="GramE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">(</span></b></span><span class="SpellE"><b><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">tread_id</span></b></span><b><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">, <span class="SpellE">estado</span>)<o:p></o:p></span></b></p>

<p><span style="font-size:10.0pt">Para utilizar<span style="mso-spacerun:yes">&nbsp;
</span>são necessários os seguintes passos:</span> <span style="font-size:10.0pt"><o:p></o:p></span></p>

<ol start="1" type="1">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l35 level1 lfo36;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Declarar a variável com o tipo de dados pthread_attr_t ; <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l35 level1 lfo36;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Inicializar a variável com a função pthread_attr_init <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l35 level1 lfo36;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Definir o estado do atributo com a função
     pthread_attr_setdetachstate; <o:p></o:p></span></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l35 level1 lfo36;tab-stops:list 36.0pt"><span style="font-size:
     10.0pt">Libertar os recursos utilizados por essa variável com a função
     pthread_attr_destroy <o:p></o:p></span></li>
</ol>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><b><span style="font-size:10.0pt">Exemplo 2:</span></b><span style="font-size:10.0pt"> Este exemplo espera que todos os threads terminem
através da utilização da função pthread_join.<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">#include &lt;<span class="SpellE">pthread.h</span>&gt;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">#include &lt;<span class="SpellE">stdio.h</span>&gt;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">void
*ocupa_tempo(void *null)<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">{<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span class="SpellE"><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">int</span></span></span><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB"> <span class="SpellE">i,j</span>;<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">for</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB"> (<span class="SpellE">i</span>=0;i&lt;50000;i++)<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">j+=<span class="SpellE">i</span>;<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_<span class="GramE">exit</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">NULL);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">}<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;<o:p></o:p></span></p>

<p><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">void</span></span><span lang="EN-GB" style="font-size:
10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB"> main()<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">{<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span class="SpellE"><span class="GramE">pthread_t</span></span> threads[5];<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span class="SpellE"><span class="GramE">pthread_attr_t</span></span> <span class="SpellE">attr</span>;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span class="SpellE"><span class="GramE">int</span></span> <span class="SpellE">s,i,estado</span>;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span class="SpellE">pthread_attr_<span class="GramE">init</span></span><span class="GramE">(</span>&amp;<span class="SpellE">attr</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span class="SpellE">pthread_attr_<span class="GramE">setdetachstate</span></span><span class="GramE">(</span>&amp;<span class="SpellE">attr</span>, PTHREAD_CREATE_JOINABLE);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span class="GramE">for(</span><span class="SpellE">i</span>=0; <span class="SpellE">i</span>&lt;5; <span class="SpellE">i</span>++)<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="SpellE"><span class="GramE">printf</span></span><span class="GramE">(</span>"A
<span class="SpellE">criar</span> o thread %d\<span class="SpellE">n",i</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s=<span class="SpellE">pthread_<span class="GramE">create</span></span><span class="GramE">(</span>&amp;threads[<span class="SpellE">i</span>], &amp;<span class="SpellE">attr,ocupa_tempo</span>, NULL
);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">if (s)<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
perror("Erro ao criar o thread");<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB">exit(</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">-1);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; }<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span class="SpellE">pthread_attr_<span class="GramE">destroy</span></span><span class="GramE">(</span>&amp;<span class="SpellE">attr</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span class="GramE">for(</span><span class="SpellE">i</span>=0; <span class="SpellE">i</span>&lt;5; <span class="SpellE">i</span>++)<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s=<span class="SpellE">pthread_<span class="GramE">join</span></span><span class="GramE">(</span>threads[<span class="SpellE">i</span>], (void **) &amp;<span class="SpellE">estado</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="GramE">if</span> (s)<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span class="SpellE"><span class="GramE">perror</span></span><span class="GramE">(</span>"<span class="SpellE">Erro</span> no join");<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span class="GramE">exit(</span>-1);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">}<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
printf("O thread %d terminou com o estado %d\n",i,estado);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp; }<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;
pthread_exit(NULL);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">}<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<h3 style="margin:0cm;margin-bottom:.0001pt;text-align:justify;text-justify:
inter-ideograph;mso-pagination:none"><span style="font-size:12.0pt;mso-bidi-font-size:
13.0pt;mso-bidi-font-family:Arial;layout-grid-mode:line;mso-bidi-font-weight:
normal">Variáveis de exclusão mútua<o:p></o:p></span></h3>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span style="layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph;
mso-pagination:none"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
layout-grid-mode:line">As variáveis de exclusão mútua (mutex) são uma das
formas de obter sincronização entre <i style="mso-bidi-font-style:normal">threads</i>.
Actuam como um semáforo com um único recurso, fechando e protegendo o acesso a
um recurso partilhado. Num dado instante apenas um <i style="mso-bidi-font-style:
normal">thread</i> consegue fechar uma variável de exclusão mútua. Estas
variáveis podem ser usadas para evitar race conditions. Segue-se um exemplo
de uma race condition numa transacção bancária assumindo que o balanço
inicial é 10000.00:<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:36.0pt;text-align:justify;text-justify:
inter-ideograph;mso-pagination:none"><span style="layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="border-collapse:collapse;mso-table-layout-alt:fixed;border:none;
 mso-border-alt:solid windowtext .5pt;mso-padding-alt:0cm 3.5pt 0cm 3.5pt">
 <tbody><tr style="mso-yfti-irow:0">
  <td width="71" valign="top" style="width:53.15pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;background:#E0E0E0;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span class="SpellE"><b><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:
  EN-GB;layout-grid-mode:line">Instante</span></b></span><b><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:EN-GB;
  layout-grid-mode:line"><o:p></o:p></span></b></p>
  </td>
  <td width="161" valign="top" style="width:120.45pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;background:#E0E0E0;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><b><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:EN-GB;
  layout-grid-mode:line">Thread 1<o:p></o:p></span></b></p>
  </td>
  <td width="161" valign="top" style="width:120.5pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;background:#E0E0E0;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><b><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:EN-GB;
  layout-grid-mode:line">Thread 2<o:p></o:p></span></b></p>
  </td>
  <td width="184" valign="top" style="width:138.1pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;background:#E0E0E0;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><b><span style="font-size:
  10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line">Balanço<o:p></o:p></span></b></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:1">
  <td width="71" valign="top" style="width:53.15pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line">1<o:p></o:p></span></p>
  </td>
  <td width="161" valign="top" style="width:120.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line">A </span><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;
  layout-grid-mode:line">¬</span><span style="font-size:10.0pt;mso-bidi-font-size:
  12.0pt;layout-grid-mode:line"> balanço<o:p></o:p></span></p>
  </td>
  <td width="161" valign="top" style="width:120.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none">&nbsp;<span style="font-size:
  10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><o:p></o:p></span></p>
  </td>
  <td width="184" valign="top" style="width:138.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line">10000.00<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:2">
  <td width="71" valign="top" style="width:53.15pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line">2<o:p></o:p></span></p>
  </td>
  <td width="161" valign="top" style="width:120.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none">&nbsp;<span style="font-size:
  10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><o:p></o:p></span></p>
  </td>
  <td width="161" valign="top" style="width:120.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line">B </span><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;
  layout-grid-mode:line">¬</span><span style="font-size:10.0pt;mso-bidi-font-size:
  12.0pt;layout-grid-mode:line"> balanço<o:p></o:p></span></p>
  </td>
  <td width="184" valign="top" style="width:138.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line">10000.00<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:3">
  <td width="71" valign="top" style="width:53.15pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line">3<o:p></o:p></span></p>
  </td>
  <td width="161" valign="top" style="width:120.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none">&nbsp;<span style="font-size:
  10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><o:p></o:p></span></p>
  </td>
  <td width="161" valign="top" style="width:120.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line">balanço</span><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;
  layout-grid-mode:line">¬</span><span style="font-size:10.0pt;mso-bidi-font-size:
  12.0pt;layout-grid-mode:line"> B  5000.00<o:p></o:p></span></p>
  </td>
  <td width="184" valign="top" style="width:138.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-spacerun:yes">&nbsp; </span>5000.00<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:4;mso-yfti-lastrow:yes">
  <td width="71" valign="top" style="width:53.15pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line">4<o:p></o:p></span></p>
  </td>
  <td width="161" valign="top" style="width:120.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line">balanço</span><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;
  layout-grid-mode:line">¬</span><span style="font-size:10.0pt;mso-bidi-font-size:
  12.0pt;layout-grid-mode:line"> A + 6000.00<o:p></o:p></span></p>
  </td>
  <td width="161" valign="top" style="width:120.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none">&nbsp;<span style="font-size:
  10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><o:p></o:p></span></p>
  </td>
  <td width="184" valign="top" style="width:138.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm 3.5pt 0cm 3.5pt">
  <p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
  mso-bidi-font-size:12.0pt;layout-grid-mode:line">16000.00<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph;
mso-pagination:none;mso-list:skip"><span style="layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph;
mso-pagination:none;mso-list:skip"><span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph;
mso-pagination:none;mso-list:skip"><span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;layout-grid-mode:line">Neste exemplo deveria ser usada uma variável
mutex para fechar o balanço enquanto é utilizado por cada thread, de modo a
evitar situações de incoerência (neste caso o resultado correcto é 11000$00 !).<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;mso-pagination:none;mso-list:skip"><span style="layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none;mso-list:skip"><span style="layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none;mso-list:skip"><b style="mso-bidi-font-weight:normal"><span style="layout-grid-mode:line">Funções
para a criação/destruição de variáveis mutex:<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none;mso-list:skip"><span style="layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph;
mso-pagination:none;mso-list:skip"><span class="SpellE"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">pthread_mutex_<span class="GramE">init</span></span></b></span><span class="GramE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-GB;layout-grid-mode:
line">(</span></b></span><span class="SpellE"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">mutex,attr</span></b></span><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none;mso-list:skip"><span lang="EN-GB" style="mso-ansi-language:EN-GB;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:53.25pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo38;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">cria e inicializa uma variável
mutex, definindo os seus atributos de acordo com <i style="mso-bidi-font-style:
normal">attr</i>;<o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:53.25pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo38;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">As variáveis mutex devem ser
do tipo <b style="mso-bidi-font-weight:normal">pthread_mutex_t</b>;<o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:53.25pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo38;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><i style="mso-bidi-font-style:
normal"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:
line">attr</span></i></span><span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;layout-grid-mode:line"> é utilizado para definir as propriedades da
variável mutex, e deve ser do tipo <b style="mso-bidi-font-weight:normal">pthread_mutexattr_t</b>
se for usada (para utilizar os valores por defeito, pode-se usar NULL em
substituição de <i style="mso-bidi-font-style:normal">attr</i>)<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">pthread_mutex_<span class="GramE">destroy</span></span></b></span><span class="GramE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-GB;layout-grid-mode:
line">(</span></b></span><span class="SpellE"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">mutex</span></b></span><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:
EN-GB;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:53.25pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo38;tab-stops:list 36.0pt"><!--[if !supportLists]--><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:
EN-GB;layout-grid-mode:line"><span style="mso-list:Ignore">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span class="SpellE"><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
mso-ansi-language:EN-GB;layout-grid-mode:line">destrói</span></span></span></span><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:
EN-GB;layout-grid-mode:line"> a <span class="SpellE">variável</span> <span class="SpellE">mutex</span>.<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:
EN-GB;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">pthread_mutexattr_<span class="GramE">init</span></span></b></span><span class="GramE"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">(</span></b></span><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">attr</span></b></span><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">&nbsp;<o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:53.4pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo39;tab-stops:list 36.0pt"><!--[if !supportLists]--><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB;layout-grid-mode:line"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span></span></b><!--[endif]--><span dir="LTR"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:
EN-GB;layout-grid-mode:line;mso-bidi-font-weight:bold">inicializa</span></span></span><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:
EN-GB;layout-grid-mode:line;mso-bidi-font-weight:bold"> <span class="SpellE">attr</span></span><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line"><o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:35.4pt;mso-pagination:none"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">&nbsp;<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">pthread_mutexattr_<span class="GramE">destroy</span></span></b></span><span class="GramE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">(</span></b></span><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-GB;layout-grid-mode:
line">attr</span></b></span><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-GB;layout-grid-mode:
line">)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">&nbsp;<o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:53.4pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo39;tab-stops:list 36.0pt"><!--[if !supportLists]--><b style="mso-bidi-font-weight:normal"><span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:&quot;Courier New&quot;;
layout-grid-mode:line"><span style="mso-list:Ignore">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span></span></span></b><!--[endif]--><span dir="LTR"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line;mso-bidi-font-weight:bold">remove<span style="mso-spacerun:yes">&nbsp; </span>attr</span></span><b style="mso-bidi-font-weight:
normal"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;layout-grid-mode:line"><o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><b style="mso-bidi-font-weight:
normal"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;layout-grid-mode:line">&nbsp;<o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><b style="mso-bidi-font-weight:normal"><span style="font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;layout-grid-mode:line">&nbsp;<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><b style="mso-bidi-font-weight:
normal"><span style="layout-grid-mode:line">Funções para a abrir/fechar
varáveis mutex:<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><span style="layout-grid-mode:
line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">pthread_mutex_<span class="GramE">lock</span></span></b></span><span class="GramE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-GB;layout-grid-mode:
line">(</span></b></span><span class="SpellE"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">mutex</span></b></span><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:EN-GB;
layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:53.25pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo38;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span lang="ES-TRAD" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:ES-TRAD;
layout-grid-mode:line">fecha a variável mutex. </span></span><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line">Se já
estiver fechada a função bloqueia até que seja possível fechar.<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">pthread_mutex_<span class="GramE">trylock</span></span></b></span><span class="GramE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-GB;layout-grid-mode:
line">(</span></b></span><span class="SpellE"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">mutex</span></b></span><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-GB;layout-grid-mode:
line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:53.4pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo39;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span lang="EN-GB" style="font-size:
10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-spacerun:yes">&nbsp;</span></span></span><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">tenta fechar a variável mutex.
Se já estiver fechada esta função não bloqueia e devolve um<span style="mso-spacerun:yes">&nbsp; </span>valor de erro (EBUSY).<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">pthread_mutex_<span class="GramE">unlock</span></span></b></span><span class="GramE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-GB;layout-grid-mode:
line">(</span></b></span><span class="SpellE"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">mutex</span></b></span><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:
EN-GB;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:53.4pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo39;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span lang="EN-GB" style="font-size:
10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-spacerun:yes">&nbsp;</span></span></span><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">abre uma variável mutex.
Esta função dará erro se a variável mutex já estiver aberta ou se tentar abrir
uma variável mutex que foi fechada por outro thread.<span style="mso-tab-count:
1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt">&nbsp;<o:p></o:p></span></p>

<p><b><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></b></p>

<p><b><span style="font-size:10.0pt">Exemplo 3:</span></b><span style="font-size:10.0pt"> Este exemplo utiliza variáveis de exclusão mútua para
garantir a coerência dos dados.<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">#include &lt;<span class="SpellE">pthread.h</span>&gt;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">#include &lt;<span class="SpellE">stdio.h</span>&gt;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">/* definição das
variáveis globais */<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">int balanco=10000;<o:p></o:p></span></p>

<p><span class="SpellE"><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_t</span></span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB"> threads[2];<o:p></o:p></span></p>

<p><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_mutex_t</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB"> <span class="SpellE">mutex_balanco</span>;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">void *deposita(void
*valor)<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">{<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>int *a= (int *) valor;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*fecha a variável mutex_balanco . Se já
estiver fechada espera até <o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">que
seja possível fechar*/<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">pthread_mutex_lock(&amp;mutex_balanco);<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">balanco
+= *a;<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">/*
abre a variável mutex_balanco */<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_mutex_<span class="GramE">unlock</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">&amp;<span class="SpellE">mutex_balanco</span>);<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_<span class="GramE">exit</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">NULL);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">}<o:p></o:p></span></p>

<p><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">void</span></span><span lang="EN-GB" style="font-size:
10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB"> *<span class="SpellE">levanta</span>(void
*<span class="SpellE">valor</span>)<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">{<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>int *b= (int *) valor;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*fecha a variável mutex_balanco . Se já
estiver fechada espera até <o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">que
seja possível fechar*/<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">pthread_mutex_lock(&amp;mutex_balanco);<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">balanco
-= *b;<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">/*
abre a variável mutex_balanco */<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_mutex_<span class="GramE">unlock</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">&amp;<span class="SpellE">mutex_balanco</span>);<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_<span class="GramE">exit</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">NULL);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">}<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;<o:p></o:p></span></p>

<p><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">void</span></span><span lang="EN-GB" style="font-size:
10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB"> main()<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">{<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>int
i,s,estado,depositar=6000,levantar=5000;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/* inicializa a variável mutex_balanco
utilizando os valores por defeito */<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">pthread_mutex_<span class="GramE">init</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">&amp;<span class="SpellE">mutex_balanco</span>,
NULL);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">pthread_<span class="GramE">create</span></span><span class="GramE">(</span>&amp;threads[0],<span class="SpellE">NULL,deposita</span>,(void *)&amp;<span class="SpellE">depositar</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">pthread_<span class="GramE">create</span></span><span class="GramE">(</span>&amp;threads[1],<span class="SpellE">NULL,levanta</span>,(void *)&amp;<span class="SpellE">levantar</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="GramE">for(</span><span class="SpellE">i</span>=0; <span class="SpellE">i</span>&lt;2;
<span class="SpellE">i</span>++)<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span style="mso-tab-count:1">&nbsp; </span>{<span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s=<span class="SpellE">pthread_<span class="GramE">join</span></span><span class="GramE">(</span>threads[<span class="SpellE">i</span>], (void **) &amp;<span class="SpellE">estado</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="GramE">if</span> (s)<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span class="SpellE"><span class="GramE">perror</span></span><span class="GramE">(</span>"<span class="SpellE">Erro</span> no join");<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span class="GramE">exit(</span>-1);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">}<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
printf("O thread %d terminou com o estado %d\n",i,estado);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;
}<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">printf("O
balanço é =<span style="mso-spacerun:yes">&nbsp; </span>%d\n",balanco);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">pthread_mutex_<span class="GramE">destroy</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">&amp;<span class="SpellE">mutex_balanco</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">pthread_exit(NULL);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">}<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<h3 style="margin:0cm;margin-bottom:.0001pt;text-align:justify;text-justify:
inter-ideograph;mso-pagination:none"><span style="font-size:12.0pt;mso-bidi-font-size:
13.0pt;mso-bidi-font-family:Arial;layout-grid-mode:line;mso-bidi-font-weight:
normal">Variáveis de Condição<o:p></o:p></span></h3>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span style="layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:
line">As variáveis de condição possibilitam outro modo de sincronização de
threads. Enquanto as variáveis de exclusão mútua implementam a sincronização
através do controlo do acesso aos dados, as variáveis de condição permitem a
sincronização de trheads através do valor desses dados. Sem a utilização destas
variáveis, os threads têm que estar sempre a verificar se uma dada variável tem
um valor específico, ocupando assim tempo de processamento, pois os threads
estão constantemente ocupados com esta actividade. Uma variável de condição
obtém os mesmos resultados sem a necessidade de estar sempre a verificar o
valor.<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:
line">Nota: Uma variável de condição é sempre usada em conjunto com o fecho de
uma variável de exclusão mútua. <o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none;mso-list:skip"><b style="mso-bidi-font-weight:normal"><span style="layout-grid-mode:line">Funções
para a criação/destruição de variáveis de condição:<o:p></o:p></span></b></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph;
mso-pagination:none;mso-list:skip"><b style="mso-bidi-font-weight:normal"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;layout-grid-mode:line">&nbsp;<o:p></o:p></span></b></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph;
mso-pagination:none;mso-list:skip"><b style="mso-bidi-font-weight:normal"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;layout-grid-mode:line">pthread_cond_init(variável_de_condição,attr)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none;mso-list:skip"><span style="layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:53.25pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo38;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">cria e inicializa uma variável
de condição, definindo os seus atributos de acordo com <i style="mso-bidi-font-style:
normal">attr</i>;<o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:53.25pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo38;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">As variáveis de condição devem
ser do tipo <b style="mso-bidi-font-weight:normal">pthread_cond_t</b>;<o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:53.25pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo38;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><i style="mso-bidi-font-style:
normal"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:
line">attr</span></i></span><span style="font-size:10.0pt;mso-bidi-font-size:
12.0pt;layout-grid-mode:line"> é utilizado para definir as propriedades da
variável de condição, e deve ser do tipo <b style="mso-bidi-font-weight:normal">pthread_mutexattr_t</b>
se for usada (para utilizar os valores por defeito, pode-se usar NULL em
substituição de <i style="mso-bidi-font-style:normal">attr</i>)<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><b style="mso-bidi-font-weight:
normal"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;layout-grid-mode:line">pthread_cond_destroy(variável_de_condição)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:53.25pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo38;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">destrói a variável de
condição.<o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">pthread_condattr_<span class="GramE">init</span></span></b></span><span class="GramE"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">(</span></b></span><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">attr</span></b></span><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">&nbsp;<o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:53.4pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo39;tab-stops:list 36.0pt"><!--[if !supportLists]--><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB;layout-grid-mode:line"><span style="mso-list:Ignore">10.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span></b><!--[endif]--><span dir="LTR"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:
EN-GB;layout-grid-mode:line;mso-bidi-font-weight:bold">inicializa</span></span></span><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:
EN-GB;layout-grid-mode:line;mso-bidi-font-weight:bold"> <span class="SpellE">attr</span></span><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line"><o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:35.4pt;mso-pagination:none"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">&nbsp;<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">pthread_condattr_<span class="GramE">destroy</span></span></b></span><span class="GramE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line">(</span></b></span><span class="SpellE"><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-GB;layout-grid-mode:
line">attr</span></b></span><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-GB;layout-grid-mode:
line">)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><b style="mso-bidi-font-weight:
normal"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;mso-ansi-language:
EN-GB;layout-grid-mode:line">&nbsp;<o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:53.4pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo39;tab-stops:list 36.0pt"><!--[if !supportLists]--><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-fareast-font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB;layout-grid-mode:line"><span style="mso-list:Ignore">11.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span></b><!--[endif]--><span dir="LTR"><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-ansi-language:EN-GB;
layout-grid-mode:line;mso-bidi-font-weight:bold">remove<span style="mso-spacerun:yes">&nbsp; </span><span class="SpellE">attr</span></span></span><b style="mso-bidi-font-weight:normal"><span lang="EN-GB" style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;
mso-ansi-language:EN-GB;layout-grid-mode:line"><o:p></o:p></span></b></p>

<p><span lang="EN-GB" style="font-size:10.0pt;mso-bidi-font-size:12.0pt;
mso-ansi-language:EN-GB;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><b style="mso-bidi-font-weight:
normal"><span style="layout-grid-mode:line">Funções para a utilização das<span style="mso-spacerun:yes">&nbsp; </span>varáveis de condição:<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><span style="layout-grid-mode:
line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><b style="mso-bidi-font-weight:
normal"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;layout-grid-mode:line">pthread_cond_wait(variável_de_condição,mutex)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:53.25pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo38;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">12.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">bloqueia o thread até que a
variável de condição seja sinalizada. Esta função deve ser chamada quando a
variável de exclusão mútua se encontra fechada. Esta função abre
automaticamente a variável mutex de modo a ser utilizada por outros threads,
adormecendo de seguida o thread. <o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:53.25pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo38;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">13.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">Quando chega o sinal, fecha
a variável mutex.<o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:35.25pt;mso-pagination:none"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:35.25pt;mso-pagination:none"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><b style="mso-bidi-font-weight:
normal"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;layout-grid-mode:line">pthread_cond_signal(variável_de_condição)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:&quot;Courier New&quot;;
mso-bidi-font-family:&quot;Times New Roman&quot;;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:53.4pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo39;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line"><span style="mso-list:Ignore">14.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><!--[endif]--><span dir="LTR"><span style="font-size:10.0pt;
mso-bidi-font-size:12.0pt;layout-grid-mode:line">É utilizada para sinalizar
(ou acordar) um thread que está à espera numa variável de condição. Deve ser
chamada quando a variável de exclusão mútua se encontra fechada e deve ser
aberta a variável de exclusão mútua para permitir que a função
pthread_cond_wait do outro thread prossiga.<o:p></o:p></span></span></p>

<p class="MsoNormal" style="margin-left:35.4pt;mso-pagination:none"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><b style="mso-bidi-font-weight:
normal"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
&quot;Courier New&quot;;mso-bidi-font-family:&quot;Times New Roman&quot;;layout-grid-mode:line">pthread_cond_broadcast(variável_de_condição)<o:p></o:p></span></b></p>

<p class="MsoNormal" style="margin-left:18.0pt;mso-pagination:none"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:line">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:53.4pt;text-indent:-18.0pt;mso-pagination:
none;mso-list:l18 level1 lfo39;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="font-size:10.0pt"><span style="mso-list:Ignore">15.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span dir="LTR"><span style="font-size:10.0pt;mso-bidi-font-size:12.0pt;layout-grid-mode:
line"><span style="mso-spacerun:yes">&nbsp;</span>Deve ser utilizada em substituição
da função pthread_cond_signal, quando temos mais que um thread à espera.</span></span><span style="font-size:10.0pt"><o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><span style="layout-grid-mode:
line">&nbsp;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;<b>Exemplo 4:</b> Este exemplo
demonstra a utilização de<span style="mso-spacerun:yes">&nbsp; </span>variáveis de
condição. São utilizados dois threads para incrementar a variável
contador<span style="mso-spacerun:yes">&nbsp; </span>&nbsp;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">#include
&lt;pthread.h&gt;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">#include
&lt;stdio.h&gt;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">/* definição das
variáveis globais */<o:p></o:p></span></p>

<p><span class="SpellE"><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">int</span></span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB"> <span class="SpellE">contador</span>=0;<o:p></o:p></span></p>

<p><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_cond_t</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB"> <span class="SpellE">condicao_contador</span>;<o:p></o:p></span></p>

<p><span class="SpellE"><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_t</span></span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB"> threads[3];<o:p></o:p></span></p>

<p><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:
&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_mutex_t</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB"> <span class="SpellE">mutex_contador</span>;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="mso-ansi-language:EN-GB">&nbsp;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;<o:p></o:p></span></p>

<p><span lang="ES-TRAD" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:ES-TRAD">void *incrementa(void *valor)<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">{<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">int</span></span> <span class="SpellE">i,j</span>;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="GramE">for(</span><span class="SpellE">i</span>=0;i&lt;50;i++)<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">pthread_mutex_<span class="GramE">lock</span></span><span class="GramE">(</span>&amp;<span class="SpellE">mutex_contador</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">contador++;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>printf(O valor do contador e
%d\n,contador);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if (contador == 10)<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>pthread_cond_signal(&amp;condicao_contador);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>printf(O valor do contador e
10\n);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">}<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">pthread_mutex_<span class="GramE">unlock</span></span><span class="GramE">(</span>&amp;<span class="SpellE">mutex_contador</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp;&nbsp;&nbsp;&nbsp;
<span class="GramE">for(</span>j=0;j&lt;2000;j++)</span><span lang="EN-GB" style="mso-ansi-language:EN-GB"><span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_<span class="GramE">exit</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">NULL);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p><span lang="ES-TRAD" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:ES-TRAD">}<o:p></o:p></span></p>

<p><span lang="ES-TRAD" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:ES-TRAD">void *espera(void *valor)<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">{<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">printf(O
thread está à espera que o valor do contador seja 10\n);<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">/*
Fecha a variável mutex e espera pelo sinal. Nota: a função pthread_cond_wait
abre automaticamente a variável mutex para que possa ser usada por outros
threads enquanto espera. Também é necessário salientar que se o valor de
contador já for 10, o ciclo não é feito, evitando assim uma situação em que o
thread ficaria eternamente à espera de um sinal */<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_mutex_<span class="GramE">lock</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">&amp;<span class="SpellE">mutex_contador</span>);<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">while
(contador &lt; 10)<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">{<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>pthread_cond_wait(&amp;condicao_contador,&amp;mutex_contador);<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/* quando esta função receber o sinal,
fecha a variável mutex */<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>printf(O thread recebeu o sinal\n);<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">}<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">printf(O
contador tem o valor 10\n);<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_mutex_<span class="GramE">unlock</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">&amp;<span class="SpellE">mutex_contador</span>)<o:p></o:p></span></p>

<p style="text-indent:35.4pt"><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">pthread_<span class="GramE">exit</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">NULL);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">}<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;<o:p></o:p></span></p>

<p><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">void</span></span><span lang="EN-GB" style="font-size:
10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB"> main()<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">{<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>int i,s,estado;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/* inicializa a variável mutex_balanco
utilizando os valores por defeito */<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span class="SpellE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">pthread_mutex_<span class="GramE">init</span></span></span><span class="GramE"><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">(</span></span><span lang="EN-GB" style="font-size:10.0pt;
font-family:&quot;Courier New&quot;;mso-ansi-language:EN-GB">&amp;<span class="SpellE">mutex_contador</span>,
NULL);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">pthread_cond_<span class="GramE">init</span></span><span class="GramE">(</span>&amp;<span class="SpellE">condicao_contador,NULL</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">pthread_<span class="GramE">create</span></span><span class="GramE">(</span>&amp;threads[0],<span class="SpellE">NULL,incrementa,NULL</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">pthread_<span class="GramE">create</span></span><span class="GramE">(</span>&amp;threads[1],<span class="SpellE">NULL,incrementa,NULL</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">pthread_<span class="GramE">create</span></span><span class="GramE">(</span>&amp;threads[2],<span class="SpellE">NULL,espera,NULL</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="GramE">for(</span><span class="SpellE">i</span>=0; <span class="SpellE">i</span>&lt;3;
<span class="SpellE">i</span>++)<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp; <span style="mso-tab-count:1">&nbsp; </span>{<span style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s=<span class="SpellE">pthread_<span class="GramE">join</span></span><span class="GramE">(</span>threads[<span class="SpellE">i</span>], (void **) &amp;<span class="SpellE">estado</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="GramE">if</span> (s)<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span class="SpellE"><span class="GramE">perror</span></span><span class="GramE">(</span>"<span class="SpellE">Erro</span> no join");<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span class="GramE">exit(</span>-1);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">}<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
printf("O thread %d terminou com o estado %d\n",i,estado);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">&nbsp;&nbsp;&nbsp; </span><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
EN-GB">}<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">pthread_mutex_<span class="GramE">destroy</span></span><span class="GramE">(</span>&amp;<span class="SpellE">mutex_contador</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">pthread_cond_<span class="GramE">destroy</span></span><span class="GramE">(</span>&amp;<span class="SpellE">condicao_contador</span>);<o:p></o:p></span></p>

<p><span lang="EN-GB" style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB">&nbsp;<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE">pthread_<span class="GramE">exit</span></span><span class="GramE">(</span>NULL);<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;">}<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><span style="font-size:10.0pt">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-pagination:none"><b>Exercícios&nbsp;<o:p></o:p></b></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto">&nbsp;1-
Considere que tem definido na função <i>main</i> duas <i>strings</i> em que a
primeira tem o seu primeiro nome e a segunda o último. Faça uma função que
receba como parâmetros uma <i>string</i> e escreva essa string no monitor.
Implemente um programa em que cada <i>string</i> é apresentada por um thread
diferente.<o:p></o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto">&nbsp;2-
Considere que tem um array com cinco posições, sendo cada posição constituída
pelo número, nome e morada. Faça uma função que recebe como parâmetros uma
estrutura desse tipo e imprima o conteúdo dessa estrutura. Implemente um
programa que crie 5 threads, "passando" como argumentos uma estrutura
desse array (Ex: 0 primeiro thread fica com a primeira posição do array, etc.)<o:p></o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto">&nbsp;3-&nbsp;
Tendo um array de inteiros com 1200 posições, pretende-se calcular resultado[i]
= dados[i]*4 + 20. Crie dois threads : <o:p></o:p></p>

<ul type="disc">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l30 level1 lfo55;tab-stops:list 36.0pt">o primeiro thread calcula
     as primeiras 400 posições; <o:p></o:p></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l30 level1 lfo55;tab-stops:list 36.0pt">o segundo as seguintes
     400; <o:p></o:p></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l30 level1 lfo55;tab-stops:list 36.0pt">o resto é calculado na
     função main <o:p></o:p></li>
</ul>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:72.0pt">Depois dos cálculos terminarem, devem ser apresentados os
valores no monitor (pode ser feito na função main).<o:p></o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto">4-
Dado um array de inteiros com mil posições, crie 5 threads: <o:p></o:p></p>

<ul type="disc">
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l9 level1 lfo56;tab-stops:list 36.0pt">Dado um número, procurar
     esse número no array. <o:p></o:p></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l9 level1 lfo56;tab-stops:list 36.0pt">Cada thread, procura 200
     posições. <o:p></o:p></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l9 level1 lfo56;tab-stops:list 36.0pt">O thread que encontrar o
     número, deve imprimir a posição do array onde se encontra. Também deve
     "retornar" como valor de saída o número do thread (1, 2, 3, 4,
     5). <o:p></o:p></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l9 level1 lfo56;tab-stops:list 36.0pt">Os threads que não
     encontrarem o número devem "retornar" como <i>valor de saída</i>
     o valor 0. <o:p></o:p></li>
 <li class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l9 level1 lfo56;tab-stops:list 36.0pt">A função main tem de
     esperar que todos os threads terminem e imprimir o número do thread onde
     esse número foi encontrado (1, 2, 3, 4, 5). <o:p></o:p></li>
</ul>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
text-indent:18.0pt">Nota: O array não tem números repetidos.<o:p></o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto">5-
Para verificar se os montantes depositados pelos seus clientes continuam os
mesmos depois de efectuar alterações à base de dados, pretende-se que calcule a
soma total de todos os saldos dos clientes de um sistema bancário. Assuma que
esses valores estão num array de 1000 posições e os cálculos devem ser feitos
por 5 threads. Cada thread faz a soma de 200 posições somando depois esse valor
ao saldo total que deve ser apresentado na função main.<o:p></o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Nota: tenha em atenção a coerência
dos dados.<o:p></o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:144.0pt">&nbsp;<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">6-
Uma empresa de estatística pretende obter quantas vezes cada número foi
sorteado no totoloto. Para isso dispõe de uma base de dados com 10000 chaves.
Utilize dez threads para calcular quantas vezes cada número foi sorteado. O
thread principal deve depois imprimir os resultados.<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="margin-left:18.0pt;text-align:justify;text-justify:
inter-ideograph">Nota: tenha em atenção que em cada instante apenas um thread
deve incrementar o contador de um determinado número (ex: se dois threads
encontraram o número 5, apenas um deles deverá incrementar o contador
relacionado com o número 5, estando o outro à espera)<o:p></o:p></p>

<p class="MsoNormal" style="margin-left:18.0pt;text-align:justify;text-justify:
inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="margin-left:18.0pt;text-align:justify;text-justify:
inter-ideograph">Sugestão: Utilize um array de variáveis de exclusão mútua para
garantir a coerência dos dados.<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal">7- Uma empresa pretende simular através da utilização de <i>threads</i>
o funcionamento das seguintes viagens : cidadeA-cidadeD e cidadeC-cidadeA.<o:p></o:p></p>

<p class="MsoNormal" style="tab-stops:18.0pt"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><!--[if gte vml 1]><v:group id="_x0000_s1043" style='position:absolute;
 margin-left:1in;margin-top:2.45pt;width:252pt;height:90pt;z-index:2'
 coordorigin="3141,7537" coordsize="5040,1800">
 <v:rect id="_x0000_s1044" style='position:absolute;left:3321;top:7897;width:180;
  height:180' fillcolor="black"/>
 <v:rect id="_x0000_s1045" style='position:absolute;left:5121;top:7897;width:180;
  height:180' fillcolor="black"/>
 <v:rect id="_x0000_s1046" style='position:absolute;left:7116;top:7897;width:180;
  height:180' fillcolor="black"/>
 <v:rect id="_x0000_s1047" style='position:absolute;left:6021;top:8797;width:180;
  height:180' fillcolor="black"/>
 <v:shapetype id="_x0000_t202" coordsize="21600,21600" o:spt="202" path="m,l,21600r21600,l21600,xe">
  <v:stroke joinstyle="miter"/>
  <v:path gradientshapeok="t" o:connecttype="rect"/>
 </v:shapetype><v:shape id="_x0000_s1048" type="#_x0000_t202" style='position:absolute;
  left:3141;top:7537;width:1260;height:360' stroked="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal>cidadeA</p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><v:shape id="_x0000_s1049" type="#_x0000_t202" style='position:absolute;
  left:4761;top:7537;width:1260;height:360' stroked="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal>cidadeB</p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><v:shape id="_x0000_s1050" type="#_x0000_t202" style='position:absolute;
  left:6921;top:7537;width:1260;height:360' stroked="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal>cidadeD</p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><v:shape id="_x0000_s1051" type="#_x0000_t202" style='position:absolute;
  left:5481;top:8977;width:1260;height:360' stroked="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal>cidadeC</p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:shape><v:line id="_x0000_s1052" style='position:absolute' from="3471,7987"
  to="5271,7987"/>
 <v:line id="_x0000_s1053" style='position:absolute' from="5121,7897" to="6021,8797"/>
 <v:line id="_x0000_s1054" style='position:absolute' from="5301,7987" to="7101,7987"/>
</v:group><![endif]--><!--[if !vml]--><span style="mso-ignore:vglayout">

<table cellpadding="0" cellspacing="0" align="left">
 <tbody><tr>
  <td width="96" height="3"></td>
 </tr>
 <tr>
  <td></td>
  <td><img width="340" height="124" src="./Threads_files/image001.gif" v:shapes="_x0000_s1043 _x0000_s1044 _x0000_s1045 _x0000_s1046 _x0000_s1047 _x0000_s1048 _x0000_s1049 _x0000_s1050 _x0000_s1051 _x0000_s1052 _x0000_s1053 _x0000_s1054"></td>
 </tr>
</tbody></table>

</span><!--[endif]--><span style="mso-no-proof:yes"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span style="mso-no-proof:yes"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span style="mso-no-proof:yes"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<br style="mso-ignore:vglayout" clear="ALL">

<p class="MsoNormal">Para a simulação tenha em atenção os seguintes aspectos:<o:p></o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="margin-left:54.0pt;text-indent:-18.0pt;mso-list:l31 level1 lfo53;
tab-stops:list 54.0pt"><!--[if !supportLists]--><span style="mso-list:Ignore">-<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span dir="LTR">Em cada instante, apenas um comboio pode
usar uma das linhas (cidadeA-cidadeB, cidadeB-cidadeC, cidadeB-cidadeD);<o:p></o:p></span></p>

<p class="MsoNormal" style="margin-left:36.0pt"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="margin-left:54.0pt;text-indent:-18.0pt;mso-list:l31 level1 lfo53;
tab-stops:list 54.0pt"><!--[if !supportLists]--><span style="mso-list:Ignore">-<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span dir="LTR">Quando um comboio ocupa uma linha, deve
apresentar no monitor o número do comboio, a sua origem/destino e a linha onde
se encontra;<o:p></o:p></span></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="margin-left:54.0pt;text-indent:-18.0pt;mso-list:l31 level1 lfo53;
tab-stops:list 54.0pt"><!--[if !supportLists]--><span style="mso-list:Ignore">-<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span dir="LTR">Quando um comboio termina a viagem deve
apresentar no monitor a hora de partida e a hora de chegada. Para isso, considere
que já existe a função hora()  que devolve uma string com a hora actual
(hh:mm:ss);<o:p></o:p></span></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal">Considere que se pretendem simular 10 comboios a efectuar a
viagem cidadeA-cidadeD e 7 a fazer a viagem cidadeC-cidadeA.<o:p></o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal">Para cada comboio, utilize um <i>thread</i> para simular a
viagem.<o:p></o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto">8-
Considere um sistema de gestão de stocks armazenado num array com 1000 posições
(cada uma tem o código do produto, o preço de custo, o preço de venda,
quantidade em stock). Utilize dois threads (cada um responsável por 500 posições)
para armazenar num outro array o código e preço dos produtos com valor superior
a 5 euros). Use outro thread para escrever as primeiras 10 posições desse array
(esse thread deve esperar que estejam ocupadas as primeiras dez posições do
array).<o:p></o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto">9-&nbsp;&nbsp;
Faça um programa que crie 5 threads. Cada thread é responsável por calcular 200
posições do array resultado (resultado[i] = dados[i]*2+10). Os threads devem
imprimir os resultados segundo a ordem do array.<o:p></o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
text-align:justify;text-justify:inter-ideograph">10 - Um jornal desportivo
encomendou à sua empresa uma sondagem para aferir a popularidade dos jogadores
da selecção nacional. Foram efectuadas 10000 entrevistas, em que cada
entrevistado escolhia o seu jogador preferido (através do número : 1 a 23),
sendo esse resultado armazenado no <i>array</i> FAVORITO. Você foi encarregado
de fazer um programa com os seguintes requisitos:</p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:36.0pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-18.0pt;mso-list:l17 level1 lfo54;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="mso-list:Ignore">-<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span dir="LTR">crie 10 <i>threads</i> para processar os
dados, isto é, cada <i>thread</i> é responsável por processar 1000 posições;</span></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:18.0pt;text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:36.0pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-18.0pt;mso-list:l17 level1 lfo54;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="mso-list:Ignore">-<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span dir="LTR">Crie 23 <i>threads</i> para apresentar o
resultado relativo a cada jogador sempre que este tenha mais 10 votos (ex:
apresenta o resultado quando o jogador tem 10, 20, 30, etc.);</span></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:18.0pt;text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:36.0pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-18.0pt;mso-list:l17 level1 lfo54;tab-stops:list 36.0pt"><!--[if !supportLists]--><span style="mso-list:Ignore">-<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span dir="LTR">Depois das 10 <i>threads</i> terminarem o
processamento, deve ser apresentado o resultado total de cada jogador (nome e
votação) na <i>thread</i> principal, terminando o processo.</span></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
text-align:justify;text-justify:inter-ideograph">Nota 1: tenha em atenção que a
utilização de apenas uma variável de condição e uma variável de exclusão mútua
produz resultados pouco eficientes!</p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">Nota
2: Os nomes dos jogadores encontram-se no <i>array</i> NOMES.</p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph;
tab-stops:18.0pt">11 - A brigada de trânsito instalou 100 postos de controlo de
velocidade em todo o país. Com o objectivo de aumentar a eficácia nesse
controlo, pretende desenvolver um sistema que verifique em <u>simultâneo</u> os
100 locais. Num determinado local, cada medição é efectuada por uma função que
obtém a matrícula e a velocidade de um automóvel. Se a velocidade for superior
a 90 km/h, deve armazenar esses dados no array INFRACÇOES.<span style="mso-spacerun:yes">&nbsp; </span>Defina também uma thread, que sempre que
exista um infractor em qualquer dos locais, passe a respectiva multa.<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph;
tab-stops:18.0pt"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="margin-left:18.0pt;text-align:justify;text-justify:
inter-ideograph">Os nomes dos 100 locais estão armazenados no array LOCAIS.<o:p></o:p></p>

<p class="MsoNormal" style="margin-left:18.0pt;text-align:justify;text-justify:
inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph;
text-indent:18.0pt">Considere que já existem definidas as seguintes funções:<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="margin-left:36.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt;mso-list:l8 level1 lfo51;tab-stops:36.0pt"><!--[if !supportLists]--><b style="mso-bidi-font-weight:normal"><span style="mso-list:Ignore">-<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><!--[endif]--><span dir="LTR"><b style="mso-bidi-font-weight:normal">obtem_velocidade(dados
*registo, char *local)</b>  obtém a velocidade e a matrícula de um automóvel
no local <b style="mso-bidi-font-weight:normal">local</b>, colocando esse
resultado na variável <b style="mso-bidi-font-weight:normal">registo<o:p></o:p></b></span></p>

<p class="MsoNormal" style="margin-left:36.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt;mso-list:l8 level1 lfo52;tab-stops:36.0pt"><!--[if !supportLists]--><b style="mso-bidi-font-weight:normal"><span style="mso-list:Ignore">-<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><!--[endif]--><span dir="LTR"><b style="mso-bidi-font-weight:normal">multa(dados
registo) </b> emite uma multa para o proprietário do automóvel. <b style="mso-bidi-font-weight:normal"><o:p></o:p></b></span></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><b style="mso-bidi-font-weight:normal"><o:p>&nbsp;</o:p></b></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">typedef
struct {<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>int velocidade;<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>char matricula[20];<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>char local[50];<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">}
dados;<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><b style="mso-bidi-font-weight:normal"><o:p>&nbsp;</o:p></b></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">Nota:
Tenha em atenção que cada posto de controlo está constantemente a efectuar<span style="mso-spacerun:yes">&nbsp; </span>medições de velocidade.<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><b style="mso-bidi-font-weight:normal"><o:p>&nbsp;</o:p></b></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">Utilize
as primitivas de threads para resolver o problema.<o:p></o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">12-
Uma empresa dispõe de quatro funções de cálculo avançado para desenvolver um
estudo relativo aos seus produtos. Para cada produto necessita de usar as
quatro funções de uma modo encadeado, isto é, primeiro executa a função int
f1(int codigo), depois executa a função int f2(int res), em que res é o
resultado da execução da função f1, depois executa a função int f3(int res1),
em que res1 é o resultado da função f2, depois executa a função int f4(int
res2), em que res2 é o resultado da função f3,<span style="mso-spacerun:yes">&nbsp;
</span>depois executa a função int f3(int res3), em que res3 é o resultado da
função f4, depois executa a função int f2(int res4), em que res4 é o
resultado da função f3, depois executa a função int f1(int res5), em que res5
é o resultado da função f2 e por fim armazena o resultado da execução da função
f1 no array DADOS.<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><!--[if mso & !supportInlineShapes & supportFields]><span
style='mso-element:field-begin;mso-field-lock:yes'></span><span
style='mso-spacerun:yes'> </span>SHAPE<span style='mso-spacerun:yes'> 
</span>\* MERGEFORMAT <span style='mso-element:field-separator'></span><![endif]--><!--[if gte vml 1]><v:group
 id="_x0000_s1026" editas="canvas" style='width:396pt;height:126pt;
 mso-position-horizontal-relative:char;mso-position-vertical-relative:line'
 coordorigin="1707,9420" coordsize="7920,2520">
 <o:lock v:ext="edit" aspectratio="t"/>
 <v:shapetype id="_x0000_t75" coordsize="21600,21600" o:spt="75"
  o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
  <v:stroke joinstyle="miter"/>
  <v:formulas>
   <v:f eqn="if lineDrawn pixelLineWidth 0"/>
   <v:f eqn="sum @0 1 0"/>
   <v:f eqn="sum 0 0 @1"/>
   <v:f eqn="prod @2 1 2"/>
   <v:f eqn="prod @3 21600 pixelWidth"/>
   <v:f eqn="prod @3 21600 pixelHeight"/>
   <v:f eqn="sum @0 0 1"/>
   <v:f eqn="prod @6 1 2"/>
   <v:f eqn="prod @7 21600 pixelWidth"/>
   <v:f eqn="sum @8 21600 0"/>
   <v:f eqn="prod @7 21600 pixelHeight"/>
   <v:f eqn="sum @10 21600 0"/>
  </v:formulas>
  <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
  <o:lock v:ext="edit" aspectratio="t"/>
 </v:shapetype><v:shape id="_x0000_s1027" type="#_x0000_t75" style='position:absolute;
  left:1707;top:9420;width:7920;height:2520' o:preferrelative="f">
  <v:fill o:detectmouseclick="t"/>
  <v:path o:extrusionok="t" o:connecttype="none"/>
  <o:lock v:ext="edit" text="t"/>
 </v:shape><v:group id="_x0000_s1028" style='position:absolute;left:2427;top:9780;
  width:6461;height:1780' coordorigin="1907,11240" coordsize="6461,1780">
  <v:line id="_x0000_s1029" style='position:absolute' from="2967,11940" to="3867,11941">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1030" style='position:absolute' from="4767,11940"
   to="5667,11941">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1031" style='position:absolute' from="6567,11940"
   to="7467,11941">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1032" style='position:absolute;flip:x' from="6567,12480"
   to="7467,12481">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1033" style='position:absolute;flip:x' from="4767,12480"
   to="5667,12481">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1034" style='position:absolute;flip:x' from="2967,12480"
   to="3867,12481">
   <v:stroke endarrow="block"/>
  </v:line><v:shape id="_x0000_s1035" type="#_x0000_t202" style='position:absolute;
   left:2067;top:11760;width:900;height:1260'>
   <v:textbox style='mso-next-textbox:#_x0000_s1035'>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal>F1</p>
      <p class=MsoNormal><o:p>&nbsp;</o:p></p>
      <p class=MsoNormal>F1</p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:shape><v:shape id="_x0000_s1036" type="#_x0000_t202" style='position:absolute;
   left:3867;top:11760;width:900;height:1260'>
   <v:textbox style='mso-next-textbox:#_x0000_s1036'>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal>F2</p>
      <p class=MsoNormal><o:p>&nbsp;</o:p></p>
      <p class=MsoNormal>F2</p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:shape><v:shape id="_x0000_s1037" type="#_x0000_t202" style='position:absolute;
   left:5667;top:11760;width:900;height:1260'>
   <v:textbox style='mso-next-textbox:#_x0000_s1037'>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal>F3</p>
      <p class=MsoNormal><o:p>&nbsp;</o:p></p>
      <p class=MsoNormal>F3</p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:shape><v:shape id="_x0000_s1038" type="#_x0000_t202" style='position:absolute;
   left:7467;top:11760;width:900;height:1260'>
   <v:textbox style='mso-next-textbox:#_x0000_s1038'>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal>F4</p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:shape><v:shape id="_x0000_s1039" type="#_x0000_t202" style='position:absolute;
   left:1907;top:11240;width:1081;height:360' stroked="f">
   <v:textbox style='mso-next-textbox:#_x0000_s1039'>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span style='font-size:11.0pt'>Thread 1<o:p></o:p></span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:shape><v:shape id="_x0000_s1040" type="#_x0000_t202" style='position:absolute;
   left:3727;top:11240;width:1081;height:359' stroked="f">
   <v:textbox style='mso-next-textbox:#_x0000_s1040'>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span style='font-size:11.0pt'>Thread 2<o:p></o:p></span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:shape><v:shape id="_x0000_s1041" type="#_x0000_t202" style='position:absolute;
   left:5487;top:11240;width:1081;height:359' stroked="f">
   <v:textbox style='mso-next-textbox:#_x0000_s1041'>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span style='font-size:11.0pt'>Thread 3<o:p></o:p></span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:shape><v:shape id="_x0000_s1042" type="#_x0000_t202" style='position:absolute;
   left:7287;top:11240;width:1081;height:359' stroked="f">
   <v:textbox style='mso-next-textbox:#_x0000_s1042'>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span style='font-size:11.0pt'>Thread 4<o:p></o:p></span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:shape></v:group><w:wrap type="none"/>
 <w:anchorlock/>
</v:group><![endif]--><!--[if !vml]--><img width="528" height="168" src="./Threads_files/image002.gif" v:shapes="_x0000_s1026 _x0000_s1027 _x0000_s1028 _x0000_s1029 _x0000_s1030 _x0000_s1031 _x0000_s1032 _x0000_s1033 _x0000_s1034 _x0000_s1035 _x0000_s1036 _x0000_s1037 _x0000_s1038 _x0000_s1039 _x0000_s1040 _x0000_s1041 _x0000_s1042"><!--[endif]--><!--[if mso & !supportInlineShapes & supportFields]><v:shape
 id="_x0000_i1026" type="#_x0000_t75" style='width:396pt;height:126pt'>
 <v:imagedata croptop="-65520f" cropbottom="65520f"/>
</v:shape><span style='mso-element:field-end'></span><![endif]--></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">Considere
que existem <u>10 produtos</u> e os seus códigos estão armazenados no array
DADOS, em que cada posição é do seguinte tipo:<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><span class="SpellE"><span class="GramE"><span lang="EN-GB" style="mso-ansi-language:EN-GB">typedef</span></span></span><span lang="EN-GB" style="mso-ansi-language:EN-GB"> <span class="SpellE">struct</span> {<o:p></o:p></span></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><span lang="EN-GB" style="mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">int</span></span> <span class="SpellE">código</span>;<o:p></o:p></span></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><span lang="EN-GB" style="mso-ansi-language:EN-GB"><span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="SpellE"><span class="GramE">int</span></span> <span class="SpellE">resultado</span>;<o:p></o:p></span></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">}</p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">Para
resolver o problema deve criar <u>4 threads</u>, em que cada uma das threads
será responsável por usar cada uma das quatro funções. <o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">Nota:
tenha em atenção que a segunda thread só chama a função f2, quando for
informada que já o pode fazer. O mesmo se passa para as restantes threads. A
primeira thread só inicia o cálculo de um novo produto quando a quarta thread a
informar<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">Utilize
variáveis de condição e exclusão mútua para resolver o problema.<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">Sugestão:
utilize mais de uma variável de condição.<o:p></o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal" style="text-align:justify;text-justify:inter-ideograph">Implemente
o programa.<o:p></o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

<p><o:p>&nbsp;</o:p></p>

</div>




</body></html>